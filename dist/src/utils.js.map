{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/utils.ts"],"names":[],"mappings":";;AAAA,iCAAmC;AACnC,uBAAyB;AAKzB,+BAAsC,IAAI;IACxC,EAAE,CAAA,CAAE,EAAE,CAAC,UAAU,CAAC,IAAI,CAAE,CAAC,CAAC,CAAC;QACzB,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAS,IAAI,EAAC,KAAK;YAC9C,IAAI,OAAO,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;YAChC,EAAE,CAAA,CAAC,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;gBACvC,qBAAqB,CAAC,OAAO,CAAC,CAAC;YACjC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACzB,CAAC;QACH,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC;AACH,CAAC;AAZD,sDAYC;AAAA,CAAC;AAEF,uBAA8B,MAAW;IACvC,EAAE,CAAA,CAAC,OAAO,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;IACxC,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,UAAU,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,UAAU,KAAK,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QAC1D,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;AACH,CAAC;AAVD,sCAUC;AAED,oBAA2B,MAAW;IACpC,MAAM,CAAC;QACL,IAAI,EAAE,IAAI,OAAO,CAAE,UAAC,GAAG,EAAE,GAAG;YAC1B,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,UAAC,GAAQ,EAAE,KAAU;gBACzD,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBACR,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC;oBAEhC,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;wBAChB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;oBAC5B,CAAC;gBACH,CAAC;gBAED,IAAM,IAAI,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC;gBAE5B,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;oBACtB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC7B,CAAC;gBAED,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACrC,CAAC,CAAC,CAAA;QACJ,CAAC,CAAC;KACH,CAAA;AACH,CAAC;AAtBD,gCAsBC","sourcesContent":["import * as webpack from 'webpack';\nimport * as fs from 'fs';\n\nexport type Compiler = webpack.compiler.Compiler;\nexport type Stats = webpack.compiler.Stats;\n\nexport function deleteFolderRecursive(path): any {\n  if( fs.existsSync(path) ) {\n    fs.readdirSync(path).forEach(function(file,index){\n      var curPath = path + \"/\" + file;\n      if(fs.lstatSync(curPath).isDirectory()) { // recurse\n        deleteFolderRecursive(curPath);\n      } else { // delete file\n        fs.unlinkSync(curPath);\n      }\n    });\n    fs.rmdirSync(path);\n  }\n};\n\nexport function resolveConfig(config: any): any {\n  if(typeof config === 'string') {\n    return resolveConfig(require(config));\n  } else if (typeof config === 'function') {\n    return config();\n  } else if (config.__esModule === true && !!config.default) {\n    return resolveConfig(config.default);\n  } else {\n    return config;\n  }\n}\n\nexport function runWebpack(config: any): { done: Promise<Stats> } {\n  return {\n    done: new Promise( (RSV, RJT) => {\n      return webpack(resolveConfig(config), (err: any, stats: any) => {\n        if (err) {\n          console.error(err.stack || err);\n\n          if (err.details) {\n            console.error(err.details)\n          }\n        }\n\n        const info = stats.toJson();\n\n        if (stats.hasErrors()) {\n          console.error(info.errors);\n        }\n\n        return err ? RJT(err) : RSV(stats);\n      })\n    })\n  }\n}\n"]}